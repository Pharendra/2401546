import os
import random

print("Welcome to Professor Assistant 1.0\n")

name = input("Enter your name: ")
print(f"\nHello Professor {name}. Let's make your exam.\n")


def read_bank(path):
    # reads question/answer pairs (each Q followed by A)
    if not os.path.exists(path):
        return None

    with open(path, "r", encoding="utf-8") as f:
        lines = [l.strip() for l in f]

    pairs = []
    i = 0
    while i < len(lines) - 1:
        pairs.append((lines[i], lines[i+1]))
        i += 2
    return pairs


while True:
    opt = input("Create an exam? (Yes/No): ").strip().lower()

    if opt == "no":
        print(f"\nAlright Professor {name}, have a nice day.")
        break

    if opt == "yes":
        path = input("\nPath to question bank: ").strip()
        bank = read_bank(path)

        if bank is None:
            print("\nCould not find the file. Try again.\n")
            continue

        print("Question bank loaded.\n")

        # number of questions
        try:
            n = int(input("How many questions do you want? "))
        except:
            print("Please enter a number.\n")
            continue

        if n > len(bank):
            print(f"\nOnly {len(bank)} available, using all of them.\n")
            n = len(bank)

        outname = input("Save exam as (filename): ").strip()

        chosen = random.sample(bank, n)

        with open(outname, "w", encoding="utf-8") as out:
            out.write(f"Exam for Professor {name}\n\n")
            for idx, (q, a) in enumerate(chosen, 1):
                out.write(f"{idx}. {q}\n")
                out.write(f"Ans: {a}\n\n")

        print(f"\nExam saved in '{outname}'.\n")

    else:
        print("Please answer Yes or No.\n")
